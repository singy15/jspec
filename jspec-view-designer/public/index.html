<!DOCTYPE html>
<html>
  <head>
<style>
.jspec-view-editor--component * {
  font-size:11px;
  font-family:unset;
}

body {
  padding: 0px;
  margin: 0px;
}

.jspec-view-editor--container * {
  margin-left: 5px;
  margin-top: 5px;
}

.jspec-view-designer--button {
  background-color: #555;
  text-align: center;
  display: inline-block;
  color:#EEE;
  outline:none;
  border: solid 1px #555;
  cursor:pointer;
  box-sizing: border-box;
}

.jspec-view-designer--button:disabled {
  background-color: #CCC;
  border: solid 1px #CCC;
  cursor: default;
}

.jspec-view-designer--component-base {
  box-sizing: border-box;
}

.jspec-view-designer--component-base * {
  box-sizing: border-box;
}

</style>
  </head>
  <body>
    <div id="app" class="jspec-view-editor--component">
      <div :style="{
          position: 'absolute',
          backgroundColor: '#FAFAFA',
          width: '500px',
          height: '500px',
          left: '20px',
          top: '20px',
          overflow: 'auto'
          }"
          @click.stop="unselect()">
        <div class="jspec-view-editor--container" @click.stop>
          <button class="jspec-view-designer--button" style="width:32px" @click="addComp()">+</button>
          <button class="jspec-view-designer--button" style="width:32px" @click="delComp()" :disabled="selected == null">-</button>
          <input type="text" v-model="renaming.newName" :disabled="selected == null"/>
          <button class="jspec-view-designer--button" @click="rename()" :disabled="selected == null">RENAME</button>
          <button class="jspec-view-designer--button" @click="editStart()" :disabled="selected == null">EDIT</button>
        </div>

        <div v-for="(v,k) in view.$component">
          <div :style="{
              position: 'absolute',
              width: v.layout.width.toString() + 'px',
              height: v.layout.height.toString() + 'px',
              left: v.layout.x.toString() + 'px',
              top: v.layout.y.toString() + 'px',
              zIndex: zindex(v.layout.x, v.layout.y),
              outline: (selected === k)? 'solid 1px #F00' : '',
              }"
              class="jspec-view-designer--component-base"
              v-html="evalTemplate(v)"
              @click.stop="select(v, k)">
          </div>
          <div :style="{
              position: 'absolute',
              width: '10px',
              height: '10px',
              // outline: 'solid 1px #000',
              left: (v.layout.x + v.layout.width - 5).toString() + 'px',
              top: (v.layout.y + v.layout.height - 5).toString() + 'px',
              backgroundColor: 'transparent',
              cursor: 'nwse-resize',
              zIndex: 100000000,
              }"
              draggable="true"
              @dragstart.stop="resizeStart($event, v, k)"
              @dragend.stop="resizeEnd($event, v, k)"
              @drag.stop="resizeDrag($event, v, k)">
          </div>
          <div :style="{
              position: 'absolute',
              width: '10px',
              height: '10px',
              // outline: 'solid 1px #000',
              left: (v.layout.x - 5).toString() + 'px',
              top: (v.layout.y - 5).toString() + 'px',
              backgroundColor: 'transparent',
              cursor: 'move',
              zIndex: 100000000
              }"
              draggable="true"
              @dragstart.stop="moveStart($event, v, k)"
              @dragend.stop="moveEnd($event, v, k)"
              @drag.stop="moveDrag($event, v, k)">
          </div>
        </div>

        <div v-if="resizing.dragging">
          <div :style="{
              position: 'absolute',
              width: (resizing.target.layout.width + resizing.diff.x).toString() + 'px',
              height: (resizing.target.layout.height + resizing.diff.y).toString() + 'px',
              left: resizing.target.layout.x.toString() + 'px',
              top: resizing.target.layout.y.toString() + 'px',
              opacity: 0.5,
              pointerEvents: 'none',
              cursor: 'default',
              zIndex: zindex(resizing.target.layout.x, resizing.target.layout.y)
              }"
              class="jspec-view-designer--component-base"
              v-html="evalTemplate(resizing.target)">
          </div>
        </div>

        <div v-if="moving.dragging">
          <div :style="{
              position: 'absolute',
              width: (moving.target.layout.width).toString() + 'px',
              height: (moving.target.layout.height).toString() + 'px',
              left: (moving.target.layout.x + moving.diff.x).toString() + 'px',
              top: (moving.target.layout.y + moving.diff.y).toString() + 'px',
              opacity: 0.5,
              pointerEvents: 'none',
              cursor: 'default',
              zIndex: zindex(moving.target.layout.x, moving.target.layout.y)
              }"
              class="jspec-view-designer--component-base"
              v-html="evalTemplate(moving.target)">
          </div>
        </div>

        <div v-if="editing.editing"
             :style="{
                position: 'fixed',
                top: '0px',
                left: '0px',
                right: '0px',
                bottom: '0px',
                backgroundColor: 'rgba(0,0,0,0.3)',
                zIndex: 100000010
             }"
             @click.stop="editEnd()">
          <div :style="{
                 position: 'fixed',
                 top: '100px',
                 left: '100px',
                 right: '100px',
                 bottom: '100px',
                 backgroundColor: '#FFF',
                 }"
                 @click.stop>
            <div class="jspec-view-editor--container" style="position:absolute; top:0px; left:0px;">
              <button class="jspec-view-designer--button" style="width:100px;" @click="editEnd()">CLOSE</button>
            </div>
            <div style="padding:5px; position:absolute; top:32px; left:0px; right:0px; bottom:0px; overflow:auto;">
              <jspec-editor :root="root" :node="view.$component[selected]" :entryParent="view.$component[selected]" 
                :entryKey="null" :level="0" :open-state="true" :show-name="false"></jspec-editor>
            </div>
          </div>
        </div>

      </div>
    </div>

  </body>
  <script src="./js/index.js"></script>
</html>

